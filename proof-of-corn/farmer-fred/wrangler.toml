name = "farmer-fred"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Triggers - Daily check at 6 AM UTC (midnight CST)
[triggers]
crons = ["0 6 * * *"]

# Environment variables (secrets added via wrangler secret)
[vars]
AGENT_NAME = "Farmer Fred"
AGENT_VERSION = "1.0.0"
OPENWEATHER_API_URL = "https://api.openweathermap.org/data/3.0/onecall"
# Secrets (set via wrangler secret or .dev.vars):
# - ANTHROPIC_API_KEY
# - RESEND_API_KEY
# - OPENWEATHER_API_KEY
# - ADMIN_PASSWORD (for /admin/* endpoints)

# KV Namespace for caching
[[kv_namespaces]]
binding = "FARMER_FRED_KV"
id = "b5aabdc45c424d89995129b6af459ed8"

# D1 Database for persistent data
[[d1_databases]]
binding = "FARMER_FRED_DB"
database_name = "farmer-fred-db"
database_id = "6bbf2c23-c5cd-4229-be08-9db0a4a91632"

# Durable Objects for stateful operations
[durable_objects]
bindings = [
  { name = "FARMER_FRED_STATE", class_name = "FarmerFredState" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["FarmerFredState"]
